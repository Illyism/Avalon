extends ../layout

block head
  - var title = mkTitle(avalon.website.news.title)
  - var description = avalon.website.news.description
  - var keywords = mkKeywords(avalon.website.news.keywords)
  - var canonical = "http://www.avalon-rpg.com/news/"

block content
  .ui.content
    .contain
      h1.ui.title.center.underline #{meta.title}
      p.lead #{meta.summary}
      
      .section.bulletin.boards.box.ui
        h2.ui.title.underline #{meta.bulletin.title}
        .ui.grid.responsive.two.columns
          for item in meta.bulletin.items
            .column
              h4.ui.title: a(href=item.url) #{item.title}
              | #{item.description}

      .section.affairs.box.ui
        h2.ui.title.underline #{meta.affairs.title}
        .ui.grid.responsive.two.columns
          for item in meta.affairs.items
            .column
              h4.ui.title: a(href=item.url) #{item.title}
              | #{item.description}

      .section.military.affairs.box.ui
        h2.ui.title.underline #{meta.military.title}
        table.ui.table#militaryTable
          thead
            tr
              th(data-sort="string") Village
              th(data-sort="string") City
              th(data-sort="string") Conflict
              th(data-sort="string") Occupied
              th(data-sort="int") Legions
          tbody
            for affair in affairs
              tr
                td #{affair.village}
                td #{affair.city}
                td #{affair.conflict}
                td #{affair.occupied}
                if affair.legions
                  td #{affair.legions.length}
                else
                  td 0
block scripts
  script(src="/js/jquery.table.js")
  script.
    $("#militaryTable").stupidtable();